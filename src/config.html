<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Website Configuration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <h1>Website Configuration</h1>
    <p>Select an API:</p>
    <select id="api-select">
      <option value="catapi">Cat API</option>
      <option value="shibe">Shibe API</option>
    </select>

    <p>Select a color:</p>
    <input type="color" id="color-select">

    <button onclick="setCookie()">Save</button>

    <script>
      function popup() {
        alert("Configuration applied, nya!");
        window.location.href = window.location = '/';
      }

      function setCookie() {
        var apiSelect = document.getElementById("api-select");
        var apiValue = apiSelect.options[apiSelect.selectedIndex].value;
        
        var colorSelect = document.getElementById("color-select");
        var colorValue = colorSelect.value;

        if (apiValue === "catapi") {
          document.cookie = "CurAPI=catapi";
          document.cookie = "color=" + encodeURIComponent(colorValue);
          popup();
        } else if (apiValue === "shibe") {
          document.cookie = "CurAPI=shibe";
          document.cookie = "color=" + encodeURIComponent(colorValue);
          popup();
        }
      }

      // Set the default value of the dropdown list based on the "CurAPI" cookie
      function setDefaultAPIValue() {
        var apiSelect = document.getElementById("api-select");
        var curAPI = getCookie("CurAPI");

        if (curAPI) {
          for (var i = 0; i < apiSelect.options.length; i++) {
            if (apiSelect.options[i].value === curAPI) {
              apiSelect.selectedIndex = i;
              break;
            }
          }
        }
      }

      // Call the setDefaultAPIValue function when the page loads
      window.onload = setDefaultAPIValue;
    </script>
  </body>
</html>
